@page "/"
@using PTDoc.Application.Services
@using PTDoc.UI.Components.Dashboard
@inject IThemeService ThemeService

<PageTitle>Dashboard - PTDoc</PageTitle>

<div class="dashboard-container">
    <header class="dashboard-header">
        <div class="dashboard-header-content">
            <div class="dashboard-header-text">
                <h1>Dashboard</h1>
                <p class="dashboard-welcome">Welcome back, Dr. Sarah Johnson â€¢ Today is @DateTime.Now.ToString("dddd, MMMM d, yyyy")</p>
            </div>
            <div class="dashboard-header-actions">
                <button type="button" class="notification-btn" aria-label="Notifications" title="View notifications">
                    <svg class="notification-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M12 5.33333C12 4.27247 11.5786 3.25505 10.8284 2.50491C10.0783 1.75476 9.06087 1.33333 8 1.33333C6.93913 1.33333 5.92172 1.75476 5.17157 2.50491C4.42143 3.25505 4 4.27247 4 5.33333C4 10 2 11.3333 2 11.3333H14C14 11.3333 12 10 12 5.33333Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M9.15334 14C9.03614 14.2021 8.86791 14.3698 8.6655 14.4864C8.46309 14.603 8.23344 14.6643 8 14.6643C7.76656 14.6643 7.53691 14.603 7.3345 14.4864C7.13209 14.3698 6.96386 14.2021 6.84666 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span class="notification-badge" aria-label="1 unread notification"></span>
                </button>
            </div>
        </div>
    </header>

    <!-- Quick Action Buttons -->
    <div class="quick-actions-section">
        <button type="button" class="action-btn action-btn-primary" @onclick="HandleAddPatient" aria-label="Add new patient">
            <div class="action-btn-content">
                <div class="action-icon-container action-icon-primary">
                    <svg class="action-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M8 3.33337V12.6667" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3.33334 8H12.6667" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 14.6667C11.6819 14.6667 14.6667 11.6819 14.6667 8C14.6667 4.3181 11.6819 1.33337 8 1.33337C4.3181 1.33337 1.33334 4.3181 1.33334 8C1.33334 11.6819 4.3181 14.6667 8 14.6667Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="action-text-container">
                    <div class="action-title">Add Patient</div>
                    <div class="action-description">Create new patient profile</div>
                </div>
            </div>
            <svg class="action-arrow" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </button>

        <button type="button" class="action-btn action-btn-info" @onclick="HandleSendIntake" aria-label="Send intake form to patient">
            <div class="action-btn-content">
                <div class="action-icon-container action-icon-info">
                    <svg class="action-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M14.6667 2L7.33334 9.33333" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M14.6667 2L10 14.6667L7.33334 9.33333L2 6.66667L14.6667 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="action-text-container">
                    <div class="action-title">Send Intake</div>
                    <div class="action-description">Email intake form to patient</div>
                </div>
            </div>
            <svg class="action-arrow" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </button>
    </div>

    <!-- Main Dashboard Content Grid -->
    <div class="dashboard-main-content">
        <!-- Left Column: Dashboard Grid, Notifications & Appointments -->
        <div class="dashboard-left-column">
            <!-- Overview Section -->
            <div class="overview-section">
                <div class="overview-header">
                    <svg class="overview-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M2.5 7.5L10 2.5L17.5 7.5V15.8333C17.5 16.2754 17.3244 16.6993 17.0118 17.0118C16.6993 17.3244 16.2754 17.5 15.8333 17.5H4.16667C3.72464 17.5 3.30072 17.3244 2.98816 17.0118C2.67559 16.6993 2.5 16.2754 2.5 15.8333V7.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M7.5 17.5V10H12.5V17.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <h2 class="overview-title">Overview</h2>
                </div>

                <div class="dashboard-grid">
            <!-- Patients Today Card (Primary - highlighted) -->
            <div class="metric-card metric-card-primary">
                <div class="metric-card-content">
                    <div class="metric-icon-container metric-icon-primary">
                        <svg class="metric-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                            <path d="M16.6667 17.5V15.8333C16.6667 14.9493 16.3155 14.1014 15.6904 13.4763C15.0652 12.8512 14.2174 12.5 13.3333 12.5H6.66667C5.78261 12.5 4.93477 12.8512 4.30964 13.4763C3.68452 14.1014 3.33333 14.9493 3.33333 15.8333V17.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M10 9.16667C11.8409 9.16667 13.3333 7.67428 13.3333 5.83333C13.3333 3.99238 11.8409 2.5 10 2.5C8.15905 2.5 6.66667 3.99238 6.66667 5.83333C6.66667 7.67428 8.15905 9.16667 10 9.16667Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="metric-info">
                        <p class="metric-label">Patients Today</p>
                        <p class="metric-value">3</p>
                        <span class="metric-badge metric-badge-success">Scheduled</span>
                    </div>
                </div>
            </div>

            <!-- Appointments Card -->
            <div class="metric-card">
                <div class="metric-card-content">
                    <div class="metric-icon-container metric-icon-info">
                        <svg class="metric-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                            <path d="M15.8333 3.33333H4.16667C3.24619 3.33333 2.5 4.07953 2.5 5V16.6667C2.5 17.5871 3.24619 18.3333 4.16667 18.3333H15.8333C16.7538 18.3333 17.5 17.5871 17.5 16.6667V5C17.5 4.07953 16.7538 3.33333 15.8333 3.33333Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M13.3333 1.66667V5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M6.66667 1.66667V5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M2.5 8.33333H17.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="metric-info">
                        <p class="metric-label">Appointments</p>
                        <p class="metric-value">3</p>
                        <p class="metric-sublabel">Today</p>
                    </div>
                </div>
            </div>

            <!-- Notes Due Card -->
            <div class="metric-card">
                <div class="metric-card-content">
                    <div class="metric-icon-container metric-icon-warning">
                        <svg class="metric-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                            <path d="M11.6667 2.5H5C4.55797 2.5 4.13405 2.67559 3.82149 2.98816C3.50893 3.30072 3.33333 3.72464 3.33333 4.16667V15.8333C3.33333 16.2754 3.50893 16.6993 3.82149 17.0118C4.13405 17.3244 4.55797 17.5 5 17.5H15C15.442 17.5 15.866 17.3244 16.1785 17.0118C16.4911 16.6993 16.6667 16.2754 16.6667 15.8333V7.5L11.6667 2.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M11.6667 2.5V7.5H16.6667" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M13.3333 10.8333H6.66667" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M13.3333 14.1667H6.66667" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M8.33333 7.5H7.5H6.66667" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="metric-info">
                        <p class="metric-label">Notes Due</p>
                        <p class="metric-value">2</p>
                        <span class="metric-badge metric-badge-warning">Due Today</span>
                    </div>
                </div>
            </div>

            <!-- Pending Card -->
            <div class="metric-card">
                <div class="metric-card-content">
                    <div class="metric-icon-container metric-icon-pending">
                        <svg class="metric-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                            <path d="M10 18.3333C14.6024 18.3333 18.3333 14.6024 18.3333 10C18.3333 5.39763 14.6024 1.66667 10 1.66667C5.39763 1.66667 1.66667 5.39763 1.66667 10C1.66667 14.6024 5.39763 18.3333 10 18.3333Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M10 5V10L13.3333 11.6667" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="metric-info">
                        <p class="metric-label">Pending</p>
                        <p class="metric-value">4</p>
                        <p class="metric-sublabel">In Progress</p>
                    </div>
                </div>
            </div>

            <!-- Drafts Card -->
            <div class="metric-card">
                <div class="metric-card-content">
                    <div class="metric-icon-container metric-icon-draft">
                        <svg class="metric-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                            <path d="M14.1667 2.5C14.3856 2.28113 14.6454 2.10752 14.9313 1.98906C15.2173 1.87061 15.5238 1.80965 15.8333 1.80965C16.1429 1.80965 16.4493 1.87061 16.7353 1.98906C17.0212 2.10752 17.281 2.28113 17.5 2.5C17.7189 2.71887 17.8925 2.97871 18.0109 3.26468C18.1294 3.55064 18.1903 3.85706 18.1903 4.16667C18.1903 4.47627 18.1294 4.78269 18.0109 5.06866C17.8925 5.35463 17.7189 5.61446 17.5 5.83333L6.25 17.0833L1.66667 18.3333L2.91667 13.75L14.1667 2.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="metric-info">
                        <p class="metric-label">Drafts</p>
                        <p class="metric-value">1</p>
                        <span class="metric-badge metric-badge-draft">Unsaved</span>
                    </div>
                </div>
            </div>

            <!-- Unsigned Card (Destructive - highlighted) -->
            <div class="metric-card metric-card-destructive">
                <div class="metric-card-content">
                    <div class="metric-icon-container metric-icon-destructive">
                        <svg class="metric-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                            <path d="M8.33333 11.6667L11.6667 8.33333M11.6667 11.6667L8.33333 8.33333M10 18.3333C5.39763 18.3333 1.66667 14.6024 1.66667 10C1.66667 5.39763 5.39763 1.66667 10 1.66667C14.6024 1.66667 18.3333 5.39763 18.3333 10C18.3333 14.6024 14.6024 18.3333 10 18.3333Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="metric-info">
                        <p class="metric-label">Unsigned</p>
                        <p class="metric-value">3</p>
                        <span class="metric-badge metric-badge-destructive">Need Signature</span>
                    </div>
                </div>
            </div>

            <!-- Intakes Card (Warning border) -->
            <div class="metric-card metric-card-warning">
                <div class="metric-card-content">
                    <div class="metric-icon-container metric-icon-intake">
                        <svg class="metric-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                            <path d="M10 18.3333C14.6024 18.3333 18.3333 14.6024 18.3333 10C18.3333 5.39763 14.6024 1.66667 10 1.66667C5.39763 1.66667 1.66667 5.39763 1.66667 10C1.66667 14.6024 5.39763 18.3333 10 18.3333Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M10 6.66667V10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M10 13.3333H10.0083" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="metric-info">
                        <p class="metric-label">Intakes</p>
                        <p class="metric-value">3</p>
                        <span class="metric-badge metric-badge-intake">Incomplete</span>
                    </div>
                </div>
            </div>
                </div>
            </div>

            <!-- Notifications & Alerts Section -->
            <div class="notifications-section">
        <div class="notifications-card">
            <div class="notifications-header">
                <div class="notifications-header-left">
                    <svg class="section-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M15 6.66667C15 5.34058 14.4732 4.06881 13.5355 3.13113C12.5979 2.19345 11.3261 1.66667 10 1.66667C8.67392 1.66667 7.40215 2.19345 6.46447 3.13113C5.52678 4.06881 5 5.34058 5 6.66667C5 12.5 2.5 14.1667 2.5 14.1667H17.5C17.5 14.1667 15 12.5 15 6.66667Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M11.4417 17.5C11.2952 17.7526 11.0849 17.9622 10.8319 18.108C10.5788 18.2537 10.2918 18.3304 10 18.3304C9.70819 18.3304 9.42116 18.2537 9.16808 18.108C8.91501 17.9622 8.70475 17.7526 8.55833 17.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <h2 class="notifications-title">Notifications & Alerts</h2>
                    <span class="urgent-badge">2 Urgent</span>
                </div>
                <button type="button" class="icon-btn" aria-label="More options">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M8 9.33333C8.73638 9.33333 9.33333 8.73638 9.33333 8C9.33333 7.26362 8.73638 6.66667 8 6.66667C7.26362 6.66667 6.66667 7.26362 6.66667 8C6.66667 8.73638 7.26362 9.33333 8 9.33333Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 4C8.73638 4 9.33333 3.40305 9.33333 2.66667C9.33333 1.93029 8.73638 1.33333 8 1.33333C7.26362 1.33333 6.66667 1.93029 6.66667 2.66667C6.66667 3.40305 7.26362 4 8 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 14.6667C8.73638 14.6667 9.33333 14.0697 9.33333 13.3333C9.33333 12.597 8.73638 12 8 12C7.26362 12 6.66667 12.597 6.66667 13.3333C6.66667 14.0697 7.26362 14.6667 8 14.6667Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
            <div class="notifications-content">
                <!-- Notification items will be populated here -->
            </div>
                </div>
            </div>

            <!-- Today's Appointments Section -->
            <div class="appointments-section">
                <div class="appointments-card">
                    <div class="appointments-header">
                        <div class="appointments-header-left">
                            <svg class="section-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                <path d="M16 2H4C2.89543 2 2 2.89543 2 4V16C2 17.1046 2.89543 18 4 18H16C17.1046 18 18 17.1046 18 16V4C18 2.89543 17.1046 2 16 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M14 1V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M6 1V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M2 7H18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <h2 class="appointments-title">Today's Appointments</h2>
                        </div>
                        <div class="appointments-header-actions">
                            <button type="button" class="view-all-btn" aria-label="View all appointments">View All</button>
                            <button type="button" class="icon-btn" aria-label="More options">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                    <path d="M8 9.33333C8.73638 9.33333 9.33333 8.73638 9.33333 8C9.33333 7.26362 8.73638 6.66667 8 6.66667C7.26362 6.66667 6.66667 7.26362 6.66667 8C6.66667 8.73638 7.26362 9.33333 8 9.33333Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M8 4C8.73638 4 9.33333 3.40305 9.33333 2.66667C9.33333 1.93029 8.73638 1.33333 8 1.33333C7.26362 1.33333 6.66667 1.93029 6.66667 2.66667C6.66667 3.40305 7.26362 4 8 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M8 14.6667C8.73638 14.6667 9.33333 14.0697 9.33333 13.3333C9.33333 12.597 8.73638 12 8 12C7.26362 12 6.66667 12.597 6.66667 13.3333C6.66667 14.0697 7.26362 14.6667 8 14.6667Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="appointments-content">
                        <!-- Appointment cards will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Column: Supplemental Cards -->
        <div class="dashboard-right-column">
            <RecentNotesCard />
            <RecentActivityCard />
            <IncompleteIntakesCard />
            <RecentlyEditedPOCsCard />
        </div>
    </div>

</div>

@code {
    private async Task ToggleTheme()
    {
        await ThemeService.ToggleThemeAsync();
    }

    private void HandleAddPatient()
    {
        // TODO: Navigate to Add Patient page or open modal
        Console.WriteLine("Add Patient clicked");
    }

    private void HandleSendIntake()
    {
        // TODO: Navigate to Send Intake page or open modal
        Console.WriteLine("Send Intake clicked");
    }
}
